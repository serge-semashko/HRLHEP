<html>
    <head>
        <title>HR LHEP Log</title>
        <META http-equiv=Content-Type content="text/html; charset=utf-8">
        <style>
            body{background-color:#eefff4;}
            xmp {margin:0;} 
            .pt {cursor:pointer;} 
            span.req_start {border:solid 1px red; font-weight:bold; background-color:#FFFFA0;}
            span.req_end {border:solid 1px red; font-weight:bold; background-color:#D0FFB0;}
            div.req {display:none; border:solid 1px red; padding:4px; background-color:white;}

            span.ss_start {border:solid 1px red; background-color:#D0E8FF;}
            span.ss_back {border:solid 1px blue; background-color:#D0FFB0;}
            div.ss {display:none; border:solid 1px green; border-right:none; padding:6px; margin-left:5px;}
        </style>
        <script type="text/javascript">
            var toggleDiv = function (id) {
                var d = document.getElementById(id);
                if (d.style.display === "block")
                    d.style.display = "none";
                else
                    d.style.display = "block";
            };
        </script>
    </head><body>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_49");'>Request_HR_LHEP_49 (gateway/receive) DONE! (468ms)</span> <BR>
</div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_50");'> Request_HR_LHEP_50 [02.12 21:57:29] : 159.93.33.203 c=gateway/receive</span><div id='Request_HR_LHEP_50' class='req'> queryString:c=gateway/receive&Ver=1&ClientID=1&Command=PutObject&ObjectType=7&SrcObjectID=5cb57ef2-a006-11e5-944c-0025907d24fa&GateObjectID=123941&ClientObjectID=155768&Time=19.10.2017 21:06:04&Object={
"ФИО": "Легостаева Ксения Сергеевна",
"ТабельныйНомер": "155768",
"ИсточникаКомплектования": "958f5b1c-1c3d-11e2-ab6e-000e0ce597c9",
"ИсточникаКомплектованияКод": "000000261",
"ИсточникКомплектованияНаименование": "по свободному найму",
"УсловияРаботы": "ed6502ec-437f-11e2-993a-000e0ce597c9",
"Условия.....; log=true; session inactive=min;<br><hr>gateway/receive.cfg<br>gateway/receive.cfg: ClientID=1; Command=PutObject; ObjectType=7; ObjectID=; GlobalID=; ClientObjectID=155768;<br> Разряд=<BR>
 ФизЛицоКод=0000010396<BR>
 ДатаНачалаРаботы=21.12.2015 00:00:00<BR>
 ФизЛицо=0ef3fcdd-a005-11e5-944c-0025907d24fa<BR>
 Пол=Женский<BR>
 ТарифнаяСетка=<BR>
 УсловияТрудаНаименование=вредные, подкласс 3.1<BR>
 ГражданствоНаименование=РОССИЯ<BR>
 УсловияТрудаДата=08.09.2017 00:00:00<BR>
 КартаСОУТ=№ 1056 от 02.12.2015<BR>
 Подразделение=a299b37e-e2da-11e1-a86a-e0cb4eda5b7d<BR>
 ГрафикРаботы=Пятидневка по 8 часов (8ч.)<BR>
 УслДатаОк=<BR>
 ИсточникаКомплектования=958f5b1c-1c3d-11e2-ab6e-000e0ce597c9<BR>
 Оклад=31800<BR>
 СрокПолномочий=<BR>
 Должность=28cd7a83-560e-11e5-9444-0025907d24fa<BR>
 ДатаОкончанияРаботы=20.12.2017 00:00:00<BR>
 ТарифнаяСеткаНаименование=<BR>
 ПодразделениеНаименование=Группа №1 встречных поляризованных пучков<BR>
 ГражданствоКод=643<BR>
 ПометкаУдаления=Нет<BR>
 ИНН=500711534469<BR>
 УсловияТруда=9702b131-40cb-11e5-9440-0025907d24fa<BR>
 ДолжностьДата=08.09.2017 00:00:00<BR>
 ФИО=Легостаева Ксения Сергеевна<BR>
 УсловияТрудаКод=506586<BR>
 ДатаОклада=01.04.2017 00:00:00<BR>
 СтранаНаименование=<BR>
 УсловияРаботыНаименование=по сроч.труд. договору, на опр срок. Ст.58 п.2 ТК<BR>
 ШтатНаименование=Основной штат<BR>
 ДатаРождения=24.06.1993 00:00:00<BR>
 СтранаКод=<BR>
 УсловияРаботы=ed6502ec-437f-11e2-993a-000e0ce597c9<BR>
 ИсточникаКомплектованияКод=000000261<BR>
 ШтатКод=000000282<BR>
 УсловияРаботыКод=000000354<BR>
 ПФР=151-497-565 84<BR>
 ДолжностьКод=000001013<BR>
 Штат=6faced0c-1c3e-11e2-ab6e-000e0ce597c9<BR>
 ПричинаУвольнения=<BR>
 Гражданство=982d33e2-bee6-453a-992e-11d13fa66fa7<BR>
 ИсточникКомплектованияНаименование=по свободному найму<BR>
 ТарифнаяСеткаКод=<BR>
 ТабельныйНомер=155768<BR>
 УсловияРаботыДата=21.12.2015 00:00:00<BR>
 Страна=<BR>
 ПодразделениеДата=08.09.2017 00:00:00<BR>
 ДатаУвольнения=<BR>
 ДатаГрафика=08.09.2017 00:00:00<BR>
 ДолжностьНаименование=инженер<BR>
 ТипДеятельности=Специалисты<BR>
 ПодразделениеКод=123001<BR>
* JSON Keys=Разряд, ФизЛицоКод, ДатаНачалаРаботы, ФизЛицо, Пол, ТарифнаяСетка, УсловияТрудаНаименование, ГражданствоНаименование, УсловияТрудаДата, КартаСОУТ, Подразделение, ГрафикРаботы, УслДатаОк, ИсточникаКомплектования, Оклад, СрокПолномочий, Должность, ДатаОкончанияРаботы, ТарифнаяСеткаНаименование, ПодразделениеНаименование, ГражданствоКод, ПометкаУдаления, ИНН, УсловияТруда, ДолжностьДата, ФИО, УсловияТрудаКод, ДатаОклада, СтранаНаименование, УсловияРаботыНаименование, ШтатНаименование, ДатаРождения, СтранаКод, УсловияРаботы, ИсточникаКомплектованияКод, ШтатКод, УсловияРаботыКод, ПФР, ДолжностьКод, Штат, ПричинаУвольнения, Гражданство, ИсточникКомплектованияНаименование, ТарифнаяСеткаКод, ТабельныйНомер, УсловияРаботыДата, Страна, ПодразделениеДата, ДатаУвольнения, ДатаГрафика, ДолжностьНаименование, ТипДеятельности, ПодразделениеКод<BR>
<hr>----- gateway/receive.cfg[process request] <br>---------- Command=PutObject;<br>+++++<b>$INCLUDE </b>[process receive]<BR>
log <p style="font-family:verdana;color:red;">>#######</p> ####### sss <br>log1 ############## sss <br>log2 ############## sss <br>log3 ############## sss<br><hr>gateway/receive.cfg[process receive] ObjectType=7<br><br><span class='ss_start pt'  onClick='toggleDiv("gateway/receive_7_sotrudnik1512241049074");'> $CALL_SERVICE: <b>gateway/receive.cfg => gateway/receive_7_sotrudnik</b> (request:HR_LHEP_50)</span><div id='gateway/receive_7_sotrudnik1512241049074' class='ss'><hr><b>receive_7_sotrudnik</b><br><b>$INCLUDE </b>[set defaults]<BR>
<br> <b>SQL: [[check non-staff] (1) ]:</b><xmp>select case when '155768' like 'д%' then 'Y' else '' end as "NON-STAFF"
</xmp><xmp>***** 1 record(s) retrieved. Filled 0 parameters: </xmp>------ SQL done, 0ms.<br><BR>
<b>$INCLUDE </b>[process]<BR>
<br> <b>SQL: [gateway/receive_7_sotrudnik[check existing record] (1) ]:</b><xmp>select 'Y' as REC_EXISTS, id as REC_ID from info_11
where ID=155768
</xmp><xmp>***** 1 record(s) retrieved. Filled 2 parameters: 
REC_EXISTS=Y
REC_ID=155768</xmp>------ SQL done, 0ms.<br><BR>
<br> <b>SQL: [gateway/receive_7_sotrudnik[getFIO] (1) ]:</b><xmp>select SUBSTRING_INDEX('Легостаева Ксения Сергеевна ', ' ', 1) AS F
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
F=Легостаева</xmp>------ SQL done, 0ms.<br><BR>
<br> <b>SQL: [gateway/receive_7_sotrudnik[getFIO] (2) ]:</b><xmp>select replace('Легостаева Ксения Сергеевна ', 'Легостаева ','') AS IO
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
IO=Ксения Сергеевна </xmp>------ SQL done, 10ms.<br><BR>
<br> <b>SQL: [gateway/receive_7_sotrudnik[getFIO] (3) ]:</b><xmp>select SUBSTRING_INDEX('Ксения Сергеевна ', ' ', 1) AS I
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
I=Ксения</xmp>------ SQL done, 0ms.<br><BR>
<br> <b>SQL: [gateway/receive_7_sotrudnik[getFIO] (4) ]:</b><xmp>select replace('Ксения Сергеевна ', 'Ксения ','') AS O
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
O=Сергеевна </xmp>------ SQL done, 10ms.<br><BR>
<br> <b>SQL: [gateway/receive_7_sotrudnik[getFIO] (5) ]:</b><xmp></xmp><b>$INCLUDE </b>[PutObject]<BR>
<br> <b>SQL: [gateway/receive_7_sotrudnik[update record] (1) ]:</b><xmp>update info_11 set person_id=0000010396, F='Легостаева', I='Ксения', O='Сергеевна'
, div_code=123001, division='Группа №1 встречных поляризованных пучков', post='инженер', usl_rab='по сроч.труд. договору, на опр срок. Ст.58 п.2 ТК'
, FIO='Легостаева Ксения Сергеевна', changed=now()
where ID=155768
</xmp> DONE! 1 record(s) affected------ SQL done, 10ms.<br><BR>
<br><span class='ss_start pt'  onClick='toggleDiv("gateway/jinr_setPersonPosts1512241049104");'> $CALL_SERVICE: <b>gateway/receive_7_sotrudnik.cfg => gateway/jinr_setPersonPosts</b> (request:HR_LHEP_50)</span><div id='gateway/jinr_setPersonPosts1512241049104' class='ss'><br> <b>SQL: [[clear posts] (1) ]:</b><xmp>update info_11 set posts=''
where person_id=0000010396
</xmp> DONE! 1 record(s) affected------ SQL done, 0ms.<br><BR>
 SQL: [SQL]<BR>
<br> <b>SQL: [SQL]:</b><xmp>select p.id as "TAB_NOM", p.person_id as "KOD_FIZLICA", p.posts as "POSTS"
, d.path as DIV_NAME, d.id as div_code
, p.post as POST
from info_11 p
left join info_10 d on d.id=p.div_code
where p.is_deleted=0
and p.person_id=0000010396
order by p.person_id
</xmp> <b> Processed in 0ms. </b><br><br> <b>SQL: [[setPosts] (1) ]:</b><xmp>select distinct posts as "POSTS", id
from info_11
where person_id=10396
order by id
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
id=155768</xmp>------ SQL done, 0ms.<br><BR>
<br> <b>SQL: [[setPosts] (2) ]:</b><xmp>update info_11 set
posts='ЛФВЭ / Отделение №2 Физики на ускорительном комплексе Нуклотрон-NICA / Научно-экспериментальный отдел спиновой физики малонуклонных систем / Группа №1 встречных поляризованных пучков, инженер'
where person_id=10396
</xmp> DONE! 1 record(s) affected------ SQL done, 10ms.<br><BR>
 <b> NumTableRows=1; </b><BR>
</div><span class='ss_back pt'  onClick='toggleDiv("gateway/jinr_setPersonPosts1512241049104");'> BACK: <b>gateway/jinr_setPersonPosts => gateway/receive_7_sotrudnik.cfg; (10ms.)</b></span><BR>
</div><span class='ss_back pt'  onClick='toggleDiv("gateway/receive_7_sotrudnik1512241049074");'> BACK: <b>gateway/receive_7_sotrudnik => gateway/receive.cfg; (40ms.)</b></span><BR>
<hr>----- gateway/receive.cfg[report]: ERR_CODE=0; ERROR=; <br>+++++<b>$INCLUDE </b>gateway/receive[OK]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_50");'>Request_HR_LHEP_50 (gateway/receive) DONE! (150ms)</span> <BR>
