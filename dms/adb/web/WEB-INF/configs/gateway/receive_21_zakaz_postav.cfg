gateway/receive_21_zakaz_postav.cfg


[parameters]
request_name=S:ѕрием заказа поставщику
LOG=ON
[end]


[report]
$LOG1 <hr><b>===>>> receive_21_zakaz_postav.cfg</b><br>
$LOG5 object=#Object#;<br> 
$SET_PARAMETERS ERR_CODE=0; ERROR=; 
$SET_PARAMETERS ERROR=ќтсутствует Ёлемент; ??!Ёлемент
$SET_PARAMETERS ERROR=#ERROR# ќтсутствует Ёлемент Ref; ??!Ёлемент_Ref
$SET_PARAMETERS ERROR=#ERROR# ќтсутствует  урс¬заиморасчетов; ??! урс¬заиморасчетов

$GET_DATA [check existing record] ??!ERROR
$GET_DATA [create record] ??!DOC_EXISTS
$GET_DATA [update record] ??!ERROR
$CALL_SERVICE c=gateway/receive_21_zakaz_tabl; ??!ERROR&“овары.count>0
$CALL_SERVICE c=gateway/receive_21_zakaz_tabl_u; ??!ERROR&”слуги.count>0

$SET_PARAMETERS DOC_ID=#Ёлемент_Ref#
$SET_PARAMETERS ResultCode=3; ERR_CODE=3; Result=#ERROR#; ??ERROR
[end]

============================================================================
============================================================================
============================================================================

[check existing record]
select 'Y' as DOC_EXISTS from C3_ZAKAZ_POSTAV
where REF='#Ёлемент_Ref#'
[end]


[create record]
insert into C3_ZAKAZ_POSTAV (doc, ref)
values ('#Ёлемент#', '#Ёлемент_Ref#')
[end]
 

[update record]
update C3_ZAKAZ_POSTAV set 
KONTRAGENT='# онтрагент#'
,KONTRAGENT_REF='# онтрагент_Ref#'
,DOG='#ƒоговор онтрагента#'
,DOG_REF='#ƒоговор онтрагента_Ref#'
,SCHET_NR='#Ќомер¬ход€щего—чета#'

,SCHET_DAT=to_date('#ƒата¬ход€щего—чета#', 'DD.MM.YYYY HH24:MI:SS') ??ƒата¬ход€щего—чета
,SCHET_DAT=null ??!ƒата¬ход€щего—чета
,CURRENCY='#¬алютаƒокумента#'
,SUMMA=#—уммаƒокумента#  ??—уммаƒокумента
,SUMMA=null  ??!—уммаƒокумента
,KRATNOST=# ратность¬заиморасчетов#
,KURS=# урс¬заиморасчетов#
,DAT_OPL=to_date('#ƒатаќплаты#', 'DD.MM.YYYY HH24:MI:SS') ??ƒатаќплаты
,DAT_OPL=null  ??!ƒатаќплаты
,NDS='#—умма¬ключаетЌƒ—#'
,NDS_UCHET='#”читыватьЌƒ—#'
,DIV='#ѕодразделение#'
,DIV_REF='#ѕодразделение_Ref#'
,COMMENTS='# омментарий#'

,RESP='#ќтветственный#'
,RESP_REF='#ќтветственный_Ref#'
,SKLAD='#—клад#'
,SKLAD_REF='#—клад_Ref#'
,ORG='#ќрганизаци€#'
,BANK_SCHET='#—труктурна€≈диница#'
,BANK_SCHET_REF='#—труктурна€≈диница_Ref#'

,JINR_INITIATOR='#ќ»я»_»нициатор«акупки#'
,JINR_INITIATOR_REF='#ќ»я»_»нициатор«акупки_Ref#'
,JINR_SOURCE='#ќ»я»_»сточник‘инансировани€#'
,JINR_SOURCE_REF='#ќ»я»_»сточник‘инансировани€_Ref#'
,JINR_DEST='#ќ»я»_Ќазначение—чета#'
,JINR_NICA='#ќ»я»_Ќ» ј#'
,JINR_NICA_REF='#ќ»я»_Ќ» ј_Ref#'

,N_ADB='#є_ADB#'
,DATE_UPD=SYSDATE

where REF='#Ёлемент_Ref#'
[end]


Ќапомнитьќ—обытии=Ќет
“ип÷ен=«акупочна€ (руб)
“ип÷ен_Ref=64c78fe7-576d-11e3-9402-0025907d24fa
»спользоватьѕлановую—ебестоимость=Ќет
ќрганизаци€_Ref=35e7627d-d7be-11e1-bad5-e0cb4eda5b1f
¬алютаƒокумента_Ref=f95eef35-d7bd-11e1-bad5-e0cb4eda5b1f

“ип=«аказ поставщику
